<CustButton@Button>:
	font_size: 32

<AlarmGridLayout>:
	id: alarmpanel
	display: entry
	rows: 6
	padding: 10
	spacing: 10
    canvas.before:
        Rectangle:
            source: 'bg.jpg'
            pos: self.pos
            size: self.size

	BoxLayout:
		orientation: 'vertical'
		padding: 10
		BoxLayout:
			orientation: 'horizontal'
			TextInput:
				id: entry
				size_hint: (0.2, 1.0)
				font_size: 30
				password: True
				multiline: False
				background_color: (255, 255, 255, 0)
				foreground_color: (255, 255, 255, 1)
			Widget:
				id: separator
				size_hint_y: None
				size_hint_x: None
				height: 6
				canvas:
					Color:
						rgb: 128, 128, 128
					Rectangle:
						pos: entry.x + entry.width, 430
						size: 2, entry.height
			Label:
				size_hint: (0.8, 1.0)
				id: status
				font_size: 20
				text: "ARM & DISARM TO BEGIN"
		ProgressBar:
			id: bar
			value: 0
			max: 60
	BoxLayout:
		spacing: 10
		CustButton:
			text: "1"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "2"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "3"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "ARM AWAY"
			on_press: alarmpanel.checkCode(entry.text, "ARM_AWAY")

	BoxLayout:
		spacing: 10
		CustButton:
			text: "4"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "5"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "6"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "ARM HOME"
			on_press: alarmpanel.checkCode(entry.text, "ARM_HOME")

	BoxLayout:
		spacing: 10
		CustButton:
			text: "7"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "8"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "9"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "ARM NIGHT"
			on_press: alarmpanel.checkCode(entry.text, "ARM_NIGHT")

	BoxLayout:
		spacing: 10
		CustButton:
			text: "*"
			on_press: alarmpanel.checkCode(entry.text, "SETTINGS")
		CustButton:
			text: "0"
			on_press: alarmpanel.processBtn(self.text)
		CustButton:
			text: "CLR"
			on_press: entry.text = ""
		CustButton:
			text: "DISARM"
			on_press: alarmpanel.checkCode(entry.text, "DISARM")
      
<MenuPopup>:
    id: MPopup
    title: "Settings"
    size_hint: 1, 1
    auto_dismiss: False
    GridLayout:
        cols: 2
        Label:
        Label:
        Label:
            text: "MQTT Host"
        TextInput:
            id: mqtt_host
            text: "127.0.0.1"
        Label:
            text: "MQTT Port"
        TextInput:
            id: mqtt_port
            text: "1883"
        Label:
            text: "HASS State Topic"
        TextInput:
            id: mqtt_state
            text: "home/alarm"
        Label:
            text: "HASS Command Topic"
        TextInput:
            id: mqtt_com
            text: "home/alarm/set"
        Label:
            text: "Buzzer GPIO Pin"
        TextInput:
            id: buzzer_pin
            text: "18"
        Label:
            text: "Screen Width"
        TextInput:
            id: screen_x
            text: "800"
        Label:
            text: "Screen Height"
        TextInput:
            id: screen_y
            text: "480"
        Label:
            text: "ARM / DISARM Code"
        TextInput:
            id: alarm_code
            password: False
            text: "1230"
        Label:
            text: "Screen Brightness"
        Slider:
            id: screen_brightness
            min: "20"
            max: "255"
            value: "100"
            on_value: MPopup.changeSlider(self.value)  
        Label:
        Label:
        Button:
            text: "Apply"
            on_press: root.dismiss()
        Button:
            text: "Cancel"
            on_press: root.dismiss()